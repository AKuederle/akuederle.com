<header class="w-full max-w-[750px] mx-auto px-5 md:px-0 pt-8 pb-4">
  <nav class="flex items-center justify-between" aria-label="Main navigation">
    <a href="/" class="font-(family-name:--font-mono) text-xl font-bold text-(--color-text) hover:text-(--color-accent) no-underline transition-colors duration-150">
      Arne KÃ¼derle
    </a>
    <button
      id="menu-toggle"
      class="md:hidden text-(--color-text-muted) hover:text-(--color-accent) transition-colors duration-150 p-1"
      aria-expanded="false"
      aria-controls="mobile-nav"
      aria-label="Toggle navigation menu"
    >
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <line x1="3" y1="6" x2="21" y2="6" />
        <line x1="3" y1="12" x2="21" y2="12" />
        <line x1="3" y1="18" x2="21" y2="18" />
      </svg>
    </button>
    <ul class="hidden md:flex gap-6 list-none m-0 p-0 font-(family-name:--font-mono) text-sm">
      <li><a href="/archive" class="text-(--color-text-muted) hover:text-(--color-accent) no-underline transition-colors duration-150">Archive</a></li>
      <li><a href="/quicktips" class="text-(--color-text-muted) hover:text-(--color-accent) no-underline transition-colors duration-150">Quicktips</a></li>
      <li><a href="/about" class="text-(--color-text-muted) hover:text-(--color-accent) no-underline transition-colors duration-150">About</a></li>
    </ul>
  </nav>
  <ul id="mobile-nav" class="hidden flex-col gap-4 pt-4 list-none m-0 p-0 font-(family-name:--font-mono) text-base md:!hidden">
    <li><a href="/archive" class="text-(--color-text-muted) hover:text-(--color-accent) no-underline transition-colors duration-150">Archive</a></li>
    <li><a href="/quicktips" class="text-(--color-text-muted) hover:text-(--color-accent) no-underline transition-colors duration-150">Quicktips</a></li>
    <li><a href="/about" class="text-(--color-text-muted) hover:text-(--color-accent) no-underline transition-colors duration-150">About</a></li>
  </ul>
</header>

<script>
  function setupMenu() {
    const toggle = document.getElementById('menu-toggle');
    const mobileNav = document.getElementById('mobile-nav');
    if (!toggle || !mobileNav) return;

    function handleToggle() {
      const expanded = toggle.getAttribute('aria-expanded') === 'true';
      toggle.setAttribute('aria-expanded', String(!expanded));
      mobileNav.classList.toggle('hidden');
      mobileNav.classList.toggle('flex');
    }

    // Remove old listeners by cloning
    const newToggle = toggle.cloneNode(true);
    toggle.parentNode?.replaceChild(newToggle, toggle);
    newToggle.addEventListener('click', handleToggle);
  }

  setupMenu();
  document.addEventListener('astro:after-swap', setupMenu);
</script>
